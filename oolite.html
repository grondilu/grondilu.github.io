<!DOCTYPE html>
<html>
    <head>
	<meta charset="utf-8">
	<title>Various HTML5 tests</title>
	<script src=webgl-utils.js></script>
	<script src=gl-matrix-min.js></script>
	<script src=oolite/hipparcos-extract.js></script>
	<script src=oolite/image-preloader.js></script>
	<script src=oolite.js></script>
	<script src=cobra3.js></script>
    </head>
    <body>
	<canvas id=oolite></canvas>
	<div id=debugline></div>
	<script>
	    var canvas = document.querySelector("#oolite");
	    var gl = WebGLUtils.setupWebGL(canvas);
	    var renderer = new Oolite.Renderer(gl);
	    var stars = new Oolite.PointCloud(Oolite.convertStarCatalog(hipparcos_extract));
	    var cam = new Oolite.Camera();
	    cobra3.translate([0, 0, -100]);

	    var now = Date.now();
	    loadImages( ["images/textures/oolite_cobra3_subents.png", "images/textures/oolite_cobra3_diffuse.png"], animate );
	    function animate() {
		requestAnimFrame(animate);
		var elapsed = Date.now() - now;
		renderer.render([ stars, cobra3 ], cam);
		//cam.rotateX(elapsed * 0.00002);
		cam.rotateY(elapsed * 0.0003);
		//cam.rotateZ(elapsed * 0.00005);
		now = Date.now();
	    };
	</script>
    </body>
</html>
